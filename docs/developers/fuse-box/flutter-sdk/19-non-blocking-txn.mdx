---
title: Non-Blocking Transactions
sidebar_position: 19
---

### Non-Blocking Transactions

For Developers who want to build use cases that require a higher throughput, then 2D nonces are essential. For example: A user may want to make four independent transactions. With only a 1D nonce, a user would have to wait for each transaction to get on-chain before sending the next one to the mempool. In Non-Blocking such a user can build each User Operation using nonces from keys 0, 1, 2, and 3. All four transactions can then be submitted at once without blocking each other. This can be an approve, unstake, withdraw and transfer transaction in one User Operation. The executeBatch() method is used.

The executeBatch() method takes in an array of _`Call()`_. With each method taking in 3 keys: to, value and data.

```dart
executeBatch([
  Call(to: to, value: value, data: data),
  Call(to: to, value: value, data: data),
  Call(to: to, value: value, data: data),
]);
```

| Parameter | Type       | Status     | Description                                      |
| :-------: | ---------- | ---------- | ------------------------------------------------ |
|  **to**   | _address_  | _required_ | The address where the user want to send Tokens.  |
| **value** | _number_   | _required_ | The amount of Tokens the user is sending         |
| **data**  | _Function_ |            | Encoded Function Data for Smart Contract Methods |

Example **`transfer_and_approve.dart`**

```dart
// Approve and transfer
final res = await fuseSDK.executeBatch(
  [
    Call(
      to: EthereumAddress.fromHex('TOKEN_ADDRESS'),
      value: BigInt.zero,
      data: ContractsUtils.encodeERC20ApproveCall(
        EthereumAddress.fromHex('TOKEN_ADDRESS'),
        EthereumAddress.fromHex('SPENDER_ADDRESS'),
        BigInt.parse('AMOUNT_IN_WEI'),
      ),
    ),
    Call(
      to: EthereumAddress.fromHex('TOKEN_ADDRESS'),
      value: BigInt.zero,
      data: ContractsUtils.encodeERC20TransferCall(
        EthereumAddress.fromHex('TOKEN_ADDRESS'),
        EthereumAddress.fromHex('RECIPIENT_ADDRESS'),
        BigInt.parse('AMOUNT_IN_WEI'),
      ),
    ),
  ],
  FuseSDK.defaultTxOptions.copyWith(
    useNonceSequence: true,
  ),
);

// Transfer
await fuseSDK.transferToken(
  EthereumAddress.fromHex(Variables.NATIVE_TOKEN_ADDRESS),
  EthereumAddress.fromHex('RECIPIENT_ADDRESS'),
  BigInt.parse('AMOUNT_IN_WEI'),
  FuseSDK.defaultTxOptions.copyWith(
    useNonceSequence: true,
  ),
);

// Transfer
await fuseSDK.transferToken(
  EthereumAddress.fromHex(Variables.NATIVE_TOKEN_ADDRESS),
  EthereumAddress.fromHex('RECIPIENT_ADDRESS'),
  BigInt.parse('AMOUNT_IN_WEI'),
  FuseSDK.defaultTxOptions.copyWith(
    useNonceSequence: true,
  ),
);
```
